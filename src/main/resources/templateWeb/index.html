<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Example CorDapp</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.0-rc.1/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.2.0/ui-bootstrap-tpls.min.js"></script>
    <script src="js/corda.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body ng-app="demoAppModule" ng-controller="AgreementController as demoApp">

<nav class="navbar navbar-default">
    <div class="container-fluid">
		<div class="gp-genpact-logo">
               <svg xmlns="http://www.w3.org/2000/svg" width="172" height="63" viewBox="0 0 172 63"><title>GP_HTL_RGB</title><g fill="none" fill-rule="evenodd"><path fill="#FF555F" d="M45 15.954l-11.35 8.034-11.148-7.906L11.338 24 0 15.959 22.502 0 45 15.954"/><path fill="#25A5BD" d="M11.589 39.44V23.894L0 16v31.333L23 63V47.212L11.589 39.44M23 48h11V32H23z"/><path fill="#1E2C4C" d="M23 63l23-15.5V32L23 47.38V63"/><path fill="#FF555F" d="M34.448 40L23 31.977 34.394 24 46 31.988 34.448 40"/><path d="M69.1 36.604c2.388 0 4.37-2.042 4.37-4.601 0-2.56-1.982-4.601-4.37-4.601-2.352 0-4.335 2.041-4.335 4.6 0 2.56 1.983 4.602 4.336 4.602zm-3.83 3.661c.705 1.36 2.117 2.3 3.73 2.3 2.353 0 4.235-1.976 4.235-4.406v-.162l-.067-.032c-1.31 1.263-2.992 2.041-4.874 2.041-4.033 0-7.294-3.596-7.294-8.003C61 27.564 64.261 24 68.294 24c1.882 0 3.563.778 4.874 2.074l.067-.033v-1.62H77v13.738C77 42.501 73.672 46 69.168 46c-3.025 0-5.647-1.555-7.058-3.92l3.16-1.815zm24.705-10.37l.033-.065c-.832-1.49-2.295-2.494-3.991-2.494-1.763 0-3.127.94-4.025 2.494l.033.065h7.95zm-.433 5.214l2.595 2.494C90.64 39.093 88.545 40 86.249 40 81.66 40 78 36.437 78 32c0-4.437 3.56-8 8.017-8A7.97 7.97 0 0 1 94 32c0 .713-.067.907-.067.907H81.726c0 1.684 2.029 3.66 4.357 3.66 1.364 0 2.561-.583 3.46-1.458zm10.102-2.893V40H96V24.432h3.644v1.896l.066.034c1.236-1.563 2.896-2.362 4.62-2.362 6.507 0 6.67 6.054 6.67 7.917V40h-3.644v-7.784c0-1.863-.033-4.724-3.807-4.724-2.147 0-3.905 2.096-3.905 4.724m21.272-4.748c-2.415 0-4.36 2.082-4.36 4.658 0 2.61 1.945 4.69 4.36 4.69 2.348 0 4.327-2.08 4.327-4.69 0-2.576-1.979-4.658-4.327-4.658zm.805 12.85c-1.912 0-3.555-.76-4.897-2.114l-.068.033V46H113V24.43h3.756v1.618l.068.033c1.342-1.288 2.985-2.081 4.897-2.081 4.025 0 7.279 3.634 7.279 8.16 0 4.525-3.254 8.159-7.279 8.159zm16.379-3.752c2.388 0 4.337-2.008 4.337-4.566 0-2.559-1.95-4.6-4.336-4.6-2.353 0-4.336 2.041-4.336 4.6 0 2.558 1.983 4.566 4.336 4.566zM137.295 24c1.882 0 3.563.778 4.874 2.073l.067-.033v-1.62H146v15.16h-3.765v-1.555l-.067-.065c-1.31 1.263-2.992 2.041-4.874 2.041-4.033 0-7.294-3.563-7.294-8 0-4.437 3.26-8 7.294-8zM162 37.603A8.202 8.202 0 0 1 156.17 40c-4.546 0-8.17-3.563-8.17-8 0-4.437 3.624-8 8.17-8 2.272 0 4.348.907 5.83 2.397l-2.602 2.396a4.364 4.364 0 0 0-3.228-1.392c-2.504 0-4.48 2.072-4.48 4.599 0 2.526 1.976 4.566 4.48 4.566a4.54 4.54 0 0 0 3.294-1.425L162 37.603m7.386-10.284V39h-3.772V27.319H163v-3.505h2.614V17h3.772v6.814H172v3.505h-2.614" fill="#25A5BD"/></g></svg>
            </div>
        <div class="navbar-header">
            <a class="navbar-brand" href="#">{{demoApp.thisNode}}</a>
        </div>
		<div class="btngroup">
			<button ng-click="demoApp.openModal()" type="button" class="btn btn-primary navbar-btn">Initiate Agreement</button>
			<button ng-click="demoApp.getAgreements()" title="See all Agreements" type="button" class="btn btn-default navbar-btn">
		See all Agreements</button>
		</div>
    </div>
</nav>


<script type="text/ng-template" id="initiateAgreementModal.html">
    <div class="modal-header">
        <h4 class="modal-title">New Agreement</h4>
    </div>
	<form class="gp-firm-side-ui">
        <div class="modal-body">
			
			
			<div class="row">
				<div class="col-lg-12">
					<div class="col-lg-6">
						<div class="form-group">
							<label for="sel1">Select Template:</label>
							<select class="form-control">
								<option>Agreement Template 1</option>
								<option>Agreement Template 2</option>
							</select>
						</div>           
					
						<h4 class="modal-title gp-inner-title">Agreement 1</h4>
						
						<div class="form-group">
							<label for="value" class="control-label">CPTY:</label>
							<select ng-model="modalInstance.form.counterparty" class="form-control" id="counterparty" ng-options="peer as peer for peer in modalInstance.peers">
							</select>
							<label for="value" class="control-label">Agreement Name:</label>
							<input type="text" ng-model="modalInstance.form.agrementName" class="form-control" id="address">
							<label for="value" class="control-label">Agreement Value:</label>
							<input type="number" ng-model="modalInstance.form.agreementValue" class="form-control" id="address">
							<label for="value" class="control-label">Agreement Initiation Date:</label>
							<input type="date" ng-model="modalInstance.form.agrementInitiationDate" class="form-control">
							<label for="value" class="control-label">Collateral:</label>
							<input type="text" ng-model="modalInstance.form.collateral" class="form-control" id="eligibleCollateral">
						</div>
					</div> 
				</div> 
			</div> 
		
		
		
		
		
		
		
		
		
		
		
		
            
            <div ng-show="modalInstance.formError" class="form-group">
                <div class="alert alert-danger" role="alert">
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                    <span class="sr-only">Error:</span>
                    Enter valid Contract parameters
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button ng-click="modalInstance.create()" type="button" class="btn btn-primary">Submit</button>
			<button ng-click="modalInstance.cancel()" type="button" class="btn btn-default">Close</button>
        </div>
    </form>
    
	
	
	
	
    </div>
</script>



<script type="text/ng-template" id="messageContent.html">
    <div class="modal-body" id="modal-body">
        {{ modalInstanceTwo.message? modalInstanceTwo.message:"Success" }}
    </div>
</script>











<script type="text/ng-template" id="viewAgreementModal.html">
    <div class="modal-header">
        <h4 class="modal-title">View Agreement</h4>
    </div>
    <form class="gp-firm-side-ui">
        <div class="modal-body">
			<div class="row">
				<div class="col-lg-12">
					<table class="table table-bordered table-striped gp-table">
						<thead>
							<tr>
								<td>Agreement Name</td>
								<td>Agreement Value</td>
								<td>Agreement Initiation Date</td>
								<td>Collateral</td>
								<td>Initiator</td>
								<td>Receiver</td>
								
								
							</tr>
						</thead>

						<tbody>
							<tr>
								<td>{{agreement.agrementName}}</td>
								<td>{{agreement.agreementValue}}</td>
								<td>{{agreement.agrementInitiationDate}}</td>
								<td>{{agreement.collateral}}</td>
								<td>{{agreement.cptyInitiator}}</td>
								<td>{{agreement.cptyReciever}}</td>
							</tr>
						</tbody>
					</table>
				</div> 
				
				
					
			</div>         
        </div>
        <div class="modal-footer">         
			<div class="btn-group gp-button-group">
				<button type="button" ng-click="agree(agreement)" class="btn btn-primary">Agree</button>
				<button type="button" ng-click="cancel()" class="btn btn-secondary">Cancel</button>
			</div>
        </div>
    </form>
    </div>
</script>

<script type="text/ng-template" id="amendAgreementModal.html">
    <div class="modal-header">
        <h4 class="modal-title">Amend Agreement</h4>
    </div>
    <form class="gp-firm-side-ui">
        <div class="modal-body">
			<div class="row">
				<div class="col-lg-12">
					<div class="form-group">
						<label for="value" class="control-label">Initiator:</label>
						<input disabled type="text" ng-model="agreement.cptyInitiator" class="form-control" id="address">
						<label for="value" class="control-label">Reciever:</label>
						<input disabled type="text" ng-model="agreement.cptyReciever" class="form-control" id="address">
						<label for="value" class="control-label">Agreement Name:</label>
						<input disabled type="text" ng-model="agreement.agrementName" class="form-control" id="address">
						<label for="value" class="control-label">Agreement Value:</label>
						<input type="text" ng-model="agreement.agreementValue" class="form-control" id="address">
						<label for="value" class="control-label">Agreement Initiation Date:</label>
						<input disabled type="text" ng-model="agreement.agrementInitiationDate" class="form-control">
						<label for="value" class="control-label">Collateral:</label>
						<input type="text" ng-model="agreement.collateral" class="form-control" id="eligibleCollateral">
					</div>
					
				</div> 
			</div>         
        </div>
        <div class="modal-footer">         
			<div class="btn-group gp-button-group">
				<button type="button" ng-click="amendAgreement(agreement)" class="btn btn-primary">Amend</button>
				<button type="button" ng-click="cancel()" class="btn btn-secondary">Cancel</button>
			</div>
        </div>
    </form>
    </div>
</script>


<div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-10">
        <div ng-show="!demoApp.agreements.length" class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">There are no recorded Agreements</h3>
            </div>
            <div class="panel-body">Use the "Initiate Agreement" button to create an Agreement with a Party.</div>
        </div>
        <!--div ng-show="demoApp.ious.length" class="panel panel-primary"-->
		<div ng-show="demoApp.agreements.length" class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Agreements</h3>
            </div>
			<table class="table table-striped">
			<thead>
				<tr>
					<th>Agreement Name</th>
					<th>Initiator</th>
					<th>Receiver</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="x in demoApp.agreements">
				
					<td>{{x.state.data.agrementName}}</td>
					<td>{{x.state.data.cptyInitiator}}</td>
					<td>{{x.state.data.cptyReciever}}</td>
					<td>
						<button type="button" ng-click="demoApp.viewAgreement(x.state.data)" class="btn btn-primary">View</button>
						<button type="button" class="btn btn-primary" ng-click="demoApp.amendAgreement(x.state.data)">Amend</button>
						<button type="button" ng-click="demoApp.viewAudit(x.state.data)" class="btn btn-primary">Audit History</button>
					</td>
				</tr>
			</tbody>
		</table>
        </div>
		
        <div class="col-lg-12" ng-show="demoApp.agreementAudits.length > 0">
			<h4 class="modal-title">Audit Trail for Agreement</h4>
			<table class="table table-bordered table-striped">
				<thead>
					<tr>
						<td>Agreement Value</td>
						<td>Agreement Initiation Date</td>
						<td>Collateral</td>
						<td>Initiator</td>
						<td>Receiver</td>
						<td>Last Updated By</td>
						<td>Last Updated On</td>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="x in demoApp.agreementAudits">
						<td>{{x.state.data.agreementValue}}</td>
						<td>{{x.state.data.agrementInitiationDate}}</td>
						<td>{{x.state.data.collateral}}</td>
						<td>{{x.state.data.cptyInitiator}}</td>
						<td>{{x.state.data.cptyReciever}}</td>
						<td>{{x.state.data.lastUpdatedBy}}</td>
						<td>{{x.state.data.agrementLastAmendDate}}</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
    <div class="col-md-1"></div>
</div>

</body>
</html>